(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),s=n(7),r=n.n(s),i=(n(6),n(10)),u=n(2),l=n.p+"static/media/logo.943b66f1.svg";var p=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{className:"header__logo",src:l,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f"})})},d=o.a.createContext();var _=function(e){var t=e.onCardClick,n=e.card,c=e.onCardLike,s=e.onCardDelete,r=o.a.useContext(d),i=n.owner._id===r._id,u="element__delete-button ".concat(i?"":"element__delete-button_hidden"),l=n.likes.some((function(e){return e._id===r._id})),p="element__like-button ".concat(l?"element__like-button_active":""," ");return Object(a.jsxs)("li",{className:"element",children:[Object(a.jsxs)("div",{className:"element__image-container",children:[Object(a.jsx)("img",{className:"element__image",src:n.link,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c ".concat(n.name),onClick:function(){t(n.name,n.link)}}),Object(a.jsx)("button",{className:u,onClick:function(){s(n)}})]}),Object(a.jsxs)("div",{className:"element__caption",children:[Object(a.jsx)("h2",{className:"element__heading",children:n.name}),Object(a.jsxs)("div",{className:"element__like-wrapper",children:[Object(a.jsx)("button",{className:p,onClick:function(){c(n)}}),Object(a.jsx)("h3",{className:"element__like-counter",children:n.likes.length})]})]})]})};var m=function(e){var t=e.onEditAvatar,n=e.onEditProfile,c=e.onAddPlace,s=e.cards,r=e.onCardClick,i=e.onCardLike,u=e.onCardDelete,l=o.a.useContext(d);return Object(a.jsxs)("main",{className:"main",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__block",children:[Object(a.jsx)("div",{className:"profile__avatar",onClick:t,style:{backgroundImage:"url(".concat(l.avatar,")")}}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__wrapper",children:[Object(a.jsx)("h1",{className:"profile__name",children:l.name}),Object(a.jsx)("button",{type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__edit-button",onClick:n})]}),Object(a.jsx)("p",{className:"profile__caption",children:l.about})]})]}),Object(a.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__add-button",onClick:c})]}),Object(a.jsx)("section",{className:"elements",children:Object(a.jsx)("ul",{className:"elements__list",children:s.map((function(e){return Object(a.jsx)(_,{card:e,onCardClick:r,onCardLike:i,onCardDelete:u},e._id)}))})})]})};var j=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__text",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})};var h=function(e){var t=e.isOpen,n=e.card,c=e.onClose;return Object(a.jsx)("div",{className:"popup popup_type_image ".concat(t&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__figure",children:[Object(a.jsx)("img",{className:"popup__image",alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 ".concat(n.name),src:n.link}),Object(a.jsx)("h2",{className:"popup__caption",children:n.name}),Object(a.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-icon popup__close-icon_position_corner",name:"popup__close-button",onClick:c})]})})};var b=function(e){var t=e.name,n=e.isOpen,c=e.onSubmit,o=e.title,s=e.children,r=e.buttonName,i=e.onClose;return Object(a.jsx)("div",{className:"popup popup_type_".concat(t," ").concat(n&&"popup_opened"),children:Object(a.jsxs)("form",{className:"popup__container popup__container_type_".concat(t),name:"popup__form",onSubmit:c,children:[Object(a.jsx)("h2",{className:"popup__header",children:o}),s,Object(a.jsx)("button",{type:"submit",className:"popup__button",name:"popup__submit-button",children:r}),Object(a.jsx)("button",{type:"reset","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-icon",name:"popup__reset-button",onClick:i})]})})};var f=function(e){var t=e.onUpdateUser,n=e.isOpen,c=e.onClose,s=o.a.useState(""),r=Object(u.a)(s,2),i=r[0],l=r[1],p=o.a.useState(""),_=Object(u.a)(p,2),m=_[0],j=_[1],h=o.a.useContext(d);function f(e){"popup__name"===e.target.name?l(e.target.value):j(e.target.value)}return o.a.useEffect((function(){l(h.name),j(h.about)}),[h]),Object(a.jsxs)(b,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",buttonName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:n,onClose:c,onSubmit:function(e){e.preventDefault(),t({name:i,about:m})},children:[Object(a.jsx)("input",{type:"text",id:"name-input",className:"popup__input-text popup__input-text_type_name",name:"popup__name",required:!0,minLength:"2",maxLength:"40",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",value:i,onChange:f}),Object(a.jsx)("span",{className:"popup__error",id:"name-input-error"}),Object(a.jsx)("input",{type:"text",id:"job-input",className:"popup__input-text popup__input-text_type_job",name:"popup__job",required:!0,minLength:"2",maxLength:"200",placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",value:m,onChange:f}),Object(a.jsx)("span",{className:"popup__error",id:"job-input-error"})]})};var O=function(e){var t=e.onUpdateAvatar,n=e.isOpen,c=e.onClose,s=o.a.useRef();return Object(a.jsxs)(b,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",buttonName:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",isOpen:n,onClose:c,onSubmit:function(e){e.preventDefault(),t({avatar:s.current.value})},children:[Object(a.jsx)("input",{type:"text",id:"name-input",className:"popup__input-text popup__input-text_type_avatar",name:"popup__name",required:!0,minLength:"2",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",ref:s}),Object(a.jsx)("span",{className:"popup__error",id:"name-input-error"})]})};var v=function(e){var t=e.onAddPlace,n=e.isOpen,c=e.onClose,s=o.a.useState(""),r=Object(u.a)(s,2),i=r[0],l=r[1],p=o.a.useState(""),d=Object(u.a)(p,2),_=d[0],m=d[1];function j(e){"popup__name"===e.target.name?l(e.target.value):m(e.target.value)}return Object(a.jsxs)(b,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add_card",buttonName:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",isOpen:n,onClose:c,onSubmit:function(e){e.preventDefault(),t({name:i,link:_})},children:[Object(a.jsx)("input",{type:"text",id:"name-input",className:"popup__input-text popup__input-text_type_name",name:"popup__name",required:!0,minLength:"2",maxLength:"40",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:i,onChange:j}),Object(a.jsx)("span",{className:"popup__error",id:"name-input-error"}),Object(a.jsx)("input",{type:"url",id:"job-input",className:"popup__input-text popup__input-text_type_job",name:"popup__job",required:!0,minLength:"2",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:_,onChange:j}),Object(a.jsx)("span",{className:"popup__error",id:"job-input-error"})]})};var x=function(e){var t=e.onDeleteCard,n=e.isOpen,c=e.onClose;return Object(a.jsx)(b,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"rusure",buttonName:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",isOpen:n,onClose:c,onSubmit:function(e){e.preventDefault(),t()}})},C=n(8),N=n(9),g=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(C.a)(this,e),this._baseUrl=n,this._headers=a}return Object(N.a)(e,[{key:"_handleRes",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"cards"),{headers:this._headers}).then((function(t){return e._handleRes(t)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._handleRes(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleRes(e)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"users/me"),{headers:this._headers}).then((function(t){return e._handleRes(t)}))}},{key:"setUserInfo",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._handleRes(e)}))}},{key:"setAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._handleRes(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"".concat(t?"PUT":"DELETE"),headers:this._headers}).then((function(e){return n._handleRes(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-18/",headers:{authorization:"bdefafd7-6c0d-43a5-8c84-faac50a6afd4","Content-Type":"application/json"}});var k=function(){var e=o.a.useState(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],s=o.a.useState(!1),r=Object(u.a)(s,2),l=r[0],_=r[1],b=o.a.useState(!1),C=Object(u.a)(b,2),N=C[0],k=C[1],y=o.a.useState(!1),S=Object(u.a)(y,2),U=S[0],L=S[1],E=o.a.useState(!1),D=Object(u.a)(E,2),P=D[0],A=D[1],w=o.a.useState({name:"",link:""}),R=Object(u.a)(w,2),I=R[0],T=R[1],q=o.a.useState({}),J=Object(u.a)(q,2),H=J[0],M=J[1],z=o.a.useState([]),B=Object(u.a)(z,2),F=B[0],Y=B[1],G=o.a.useState({}),K=Object(u.a)(G,2),Q=K[0],V=K[1];function W(){k(!1),c(!1),_(!1),L(!1),A(!1),T({name:"",link:""})}return o.a.useEffect((function(){Promise.all([g.getUserInfo(),g.getInitialCards()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];V(n),Y(a)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[]),Object(a.jsx)(d.Provider,{value:Q,children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(p,{}),Object(a.jsx)(m,{onEditProfile:function(){c(!0)},onEditAvatar:function(){k(!0)},onAddPlace:function(){_(!0)},onCardClick:function(e,t){T({name:e,link:t}),L(!0)},cards:F,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Q._id}));g.changeLikeCardStatus(e._id,!t).then((function(t){var n=F.map((function(n){return n._id===e._id?t:n}));Y(n)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},onCardDelete:function(e){A(!0),M(e)}}),Object(a.jsx)(j,{}),Object(a.jsx)(f,{isOpen:n,onClose:W,onUpdateUser:function(e){var t=e.name,n=e.about;g.setUserInfo(t,n).then((function(e){V(e),W()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(v,{isOpen:l,onClose:W,onAddPlace:function(e){var t=e.name,n=e.link;g.addNewCard(t,n).then((function(e){Y([e].concat(Object(i.a)(F))),W()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(O,{isOpen:N,onClose:W,onUpdateAvatar:function(e){var t=e.avatar;g.setAvatar(t).then((function(e){V(e),W()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(x,{isOpen:P,onClose:W,onDeleteCard:function(){g.deleteCard(H._id).then((function(){var e=F.filter((function(e){return e._id!==H._id}));Y(e),W()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(h,{card:I,isOpen:U,onClose:W})]})})};r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root"))},6:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.64b1d664.chunk.js.map